all:
  children:
    osp:
      hosts:
        openstack.example.org:
          ansible_connection: local
      vars:
        osp:
          resource_path: /tmp/openstack
    
          packstack:
            CONFIG_DEFAULT_PASSWORD: openstack
            CONFIG_KEYSTONE_ADMIN_PW: openstack
            CONFIG_CINDER_VOLUMES_SIZE: 300G
            CONFIG_SERVICE_WORKERS: 2
            CONFIG_NTP_SERVERS: pool.ntp.org
            CONFIG_HEAT_INSTALL: y
            CONFIG_PROVISION_DEMO: n
            CONFIG_CEILOMETER_INSTALL: n
            CONFIG_NEUTRON_OVS_BRIDGE_MAPPINGS: physnet1:br-ex
    
          network:
            nic: eno1
            cidr: 192.168.1.0/24
            dns: 192.168.1.1
            dhcp:
              start: 192.168.1.20
              end: 192.168.1.90
    
          keypairs:
            server: ~/.ssh/id_rsa.pub
    
          flavors:
            m1.nano:
              ram: 128
              disk: 1
              ephemeral: 0
              swap: 0
              vcpus: 1
            m1.micro:
              ram: 256
              disk: 1
              ephemeral: 0
              swap: 0
              vcpus: 1
            ocp.node:
              ram: 2048
              disk: 15
              ephemeral: 0
              swap: 0
              vcpus: 1
            ocp.master:
              ram: 2048
              disk: 15
              ephemeral: 0
              swap: 0
              vcpus: 1
            ocp.infra:
              ram: 1024
              disk: 15
              ephemeral: 0
              swap: 0
              vcpus: 1
    
          images:
            cirros:
              file_name: cirros-0.4.0-x86_64-disk.img
              remote_path: http://download.cirros-cloud.net/0.4.0
              disk_format: qcow2
              min_disk: 1
              min_ram: 128
            centos:
              file_name: CentOS-7-x86_64-GenericCloud.qcow2
              remote_path: http://cloud.centos.org/centos/7/images
              disk_format: qcow2
              min_disk: 15
              min_ram: 512
    
          lab:
            floating_ip:
              - 192.168.1.2
              - 192.168.1.3
              - 192.168.1.31
              - 192.168.1.32
              - 192.168.1.33
              - 192.168.1.34
              - 192.168.1.35
    
            networks:
              lab:
                cidr: 10.0.0.0/24
                dhcp:
                  start: 10.0.0.10
                  end: 10.0.0.100
    
            servers:
              ntp:
                floating_ip: 192.168.1.3
                network: lab
                flavor: ocp.node
                image: centos
                security_group: default
              dns:
                floating_ip: 192.168.1.2
                network: lab
                flavor: ocp.node
                image: centos
                security_group: dns-security-group
    lab:
      vars:
        ansible_user: centos
        ansible_become: yes

      hosts:
        dns:
          ansible_host: 192.168.1.2
        ntp:
          ansible_host: 192.168.1.3
