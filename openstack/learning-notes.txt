vim /etc/ansible/ansible.cfg

callback_whitelist = profile_tasks, timer

eval $(openstack server show dns -f shell -c id) && \ 
openstack server delete $id --wait && \
eval $(openstack server show ntp -f shell -c id) && \
openstack server delete $id --wait && \
openstack security group delete dns-security-group && \
rm -rf ~/.ssh/known_hosts

ansible-playbook -i hosts.yml config/lab-servers.yml

yum install bash-completion bash-completion-extras

yum install python-openstackclient

#workaround if openstack complete doesn't work
sudo ln -s /usr/lib/python2.7/site-packages/magnumclient /usr/lib/python2.7/site-packages/magclient

openstack complete | sudo tee /etc/bash_completion.d/osc.bash_completion > /dev/null

for i in 0 1 2
do
	curl -v http://infra-node-$i.internal.ocp3.example.org
	curl -v -k https://infra-node-$i.internal.ocp3.example.org
	curl -v -k https://master-$i.internal.ocp3.example.org:8443
done

$ curl -v http://localhost
$ curl -v -k http://localhost:443
$ curl -v -k http://localhost:8443

########################

security_group_id=$(openstack security group list --project lab | grep "Default security group" | cut -d " " -f 2) && \
netid=$(openstack network show lab_network -f value -c id) && \
openstack server create \
 --image centos \
 --flavor m1.small \
 --key-name server \
 --nic net-id=$netid \
 --security-group $security_group_id \
 --wait \
 master-1
